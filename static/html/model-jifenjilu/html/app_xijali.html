<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Cache-control" content="no-cache"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <meta name="format-detection" content="telephone=no"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-title" content="阿拉宁波网"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
  <meta name="keywords" content="宁波,北仑,镇海,阿拉宁波网,新北仑论坛,镇海论坛,宁波网,宁波论坛,房产,人才,二手,商城,团购,文学,博客,摄影,时尚,拼客"/>
  <meta name="description" content="CNNB.COM,阿拉宁波网旗下地方社区门户,提供和分享宁波论坛,北仑论坛,镇海论坛,社交,房产,人才,购物等生活,商务资讯互动平台. ,阿拉宁波网"/>
  <link rel="shortcut icon" href="/favicon.ico"/>
  <link rel="bookmark" href="/favicon.ico" type="image/x-icon"/>
  <base href="http://dev.bbs.cnnb.com/"/>
  <title>积分记录 - 阿拉宁波网 - 手机版</title>
  <link rel="stylesheet" href="http://dev.bbs.cnnb.com/source/plugin/duceapp_base/static/css/base.css" type="text/css"
        media="all">
  <link id="duceapp_style" rel="stylesheet"
        href="http://dev.bbs.cnnb.com/source/plugin/duceapp_base/static/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="http://dev.bbs.cnnb.com/data/duceapp/base/common.css?FKK" type="text/css" media="all">
  <link rel="stylesheet" href="source/plugin/duceapp_scorebuy/static/css/addfunds_mobile.css?FKK" type="text/css"
        media="all">
  <script src="http://dev.bbs.cnnb.com/source/plugin/duceapp_base/static/js/jquery.min.js?FKK"
          type="text/javascript"></script>
  <script type="text/javascript">var STYLEID = '14', STATICURL = 'static/',
      IMGDIR = 'http://dev.bbs.cnnb.com/template/weixia_cms/weixia/src/', VERHASH = 'FKK', charset = 'utf-8',
      discuz_uid = '8', cookiepre = 'oYZ9_f4b9_', cookiedomain = '.dev.bbs.cnnb.com', cookiepath = '/',
      showusercard = '1', attackevasive = '0', disallowfloat = 'newthread', creditnotice = '1|威望|,2|财富|,7|甬钻|',
      defaultstyle = '',
      REPORTURL = 'aHR0cDovL2Rldi5iYnMuY25uYi5jb20vcGx1Z2luLnBocD9pZD1kdWNlYXBwX3Njb3JlYnV5OnRyYWRlbG9nJm1vYmlsZT0y',
      SITEURL = 'http://dev.bbs.cnnb.com/', JSPATH = 'data/cache/', DUCEAPP = {}, calendarform = {
          head: '日期时间设置',
          year: ['年', 2000, 2030],
          month: ['月', 1, 12],
          day: ['日', 1, 28],
          hour: ['时', 0, 23],
          minute: ['分', 0, 59]
      }, DUCEAPP_LANG = {confirms: '确定', cancel: '取消'}, DUCEAPP_BASE = 'duceapp_base';</script>
  <script src="http://dev.bbs.cnnb.com/source/plugin/duceapp_base/static/js/common.js?FKK" type="text/javascript"
          charset="utf-8"></script>
  <style>
    html {
      background-color: #FFFFFF;
    }
  </style>
</head>
<body class="bg">
<div class="duceapp_body">
  <div id="duceapp_head">
    <div class="headfixed duceapp_head fff hc">
      <div class="head_z z"><a href="javascript:;" onclick="history.go(-1)"><i class="duceapp_font f22">&#xe95d;</i></a>
      </div>
      <div class="head_y y"><a href="home.php?mod=space&amp;uid=8&amp;do=profile&amp;mycenter=1&amp;mobile=2"><i
        class="duceapp_font f22">&#xe932;</i></a></div>
      <h2>积分记录</h2>
    </div>
  </div>
  <div class="tbbox tbscrl tbbox2">
    <div class="tabs" id="tabs">
      <div class="tab bi_d bga">
        <ul class="f15 tab8 ff9">
          <li>
            <a href="home.php?mod=spacecp&amp;ac=credit&amp;op=base&amp;mobile=2">我的</a>
          </li>
          <li class="bb_d f15 a">
            <a
              href="home.php?mod=spacecp&amp;ac=plugin&amp;op=credit&amp;id=duceapp_scorebuy:tradelog&amp;mobile=2">记录</a>
          </li>
          <li class="bb_d f15 ">
            <a
              href="home.php?mod=spacecp&amp;ac=plugin&amp;op=credit&amp;id=duceapp_scorebuy:addfunds&amp;mobile=2">充值</a>
          </li>
          <li class="bb_d f15">
            <a
              href="">订单</a>
          </li>
          <li class="bb_d f15 ">
            <a href="home.php?mod=spacecp&amp;ac=plugin&amp;op=credit&amp;id=duceapp_scorebuy:cash&amp;mobile=2">提现</a>
          </li>
          <li class="bb_d f15 ">
            <a
              href="home.php?mod=spacecp&amp;ac=plugin&amp;op=credit&amp;id=duceapp_scorebuy:invoice&amp;mobile=2">发票</a>
          </li>
          <li class="bb_d f15">
            <a
              href="">兑换</a>
          </li>
        </ul>
      </div>
      <div class="tbb bi_d bgb rel">
        <ul class="f14 ffb cl">
          <li><a href="plugin.php?id=duceapp_scorebuy:tradelog&amp;mobile=1">积分收益</a>
          <li class="b">/</li>
          <li class="a"><a href="plugin.php?id=duceapp_scorebuy:tradelog&status=1&amp;mobile=2">系统奖励</a></li>
          <li class="b">/</li>
        </ul>
      </div>
    </div>
    <div class="creditslog">
      <ul class="pagelazy" id="page-ul">
      </ul>
    </div>

  </div>
  <script src="source/plugin/duceapp_base/static/js/optinit.js?FKK" type="text/javascript" charset="utf-8"></script>
  <div class="maskmenu" style="display:none;"></div>
</div>
<div id="mask" style="display:none;"></div>
<script type="text/javascript">

    //获取文档高度
    function getDocumentTop() {
        var scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;
        if (document.body) {
            bodyScrollTop = document.body.scrollTop;
        }
        if (document.documentElement) {
            documentScrollTop = document.documentElement.scrollTop;
        }
        scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
        return scrollTop;
    }

    //可视窗口高度
    function getWindowHeight() {
        var windowHeight = 0;
        if (document.compatMode == "CSS1Compat") {
            windowHeight = document.documentElement.clientHeight;
        } else {
            windowHeight = document.body.clientHeight;
        }
        return windowHeight;
    }

    //滚动条高度
    function getScrollHeight() {
        var scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;
        if (document.body) {
            bodyScrollHeight = document.body.scrollHeight;
        }
        if (document.documentElement) {
            documentScrollHeight = document.documentElement.scrollHeight;
        }
        scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;
        return scrollHeight;
    }

    var finished = true;
    $(function () {
        var totalPage = getItems().length; //总分页数
        appendToHTML(getItems(), 5);
        var pageSize = 5;
        $(document).scroll(function () {
            if (finished && getScrollHeight() >= (getWindowHeight() + getDocumentTop()) && pageSize <= totalPage) {
                console.log('当前页大小: ' + pageSize + '正在执行.......................');
                finished = false;
                // ajax_function()
                setTimeout(function () {
                    finished = true;
                    pageSize += 5;
                    appendToHTML(getItems(), pageSize);
                    return;
                    console.log('到底啦!');
                }, 2000);
            }
            ;
        });

        // $('#tabs').css({'position': 'static'});

        function appendToHTML(items, count) {
            if (items.length > 0 && items.length > count) {
                console.log('1->>>>>>>>>>>>>>>>>>>>>');
                append_for(items, count);
            } else if (count >= items.length) {
                console.log('3->>>>>>>>>>>>>>>>>>>>>');
                // $('#page-ul').html('');
                append_for(items, count);
            } else {
                console.log('2->>>>>>>>>>>>>>>>>>>>>');
                $('#page-ul').append('<li class = "bga bh_e f14"><a href = "#">' +
                    '<div class = "cl"> <strong class = "status ffr" style = "float: left;">' + '</strong>' +
                    ' <span class = "status"><em style = "color: #8b8b8b;" ></em></span></div><dl class = "cl" style="text-align: center;"><p>' + '暂无无任何交易记录' + '</p><dt></dt></dl><dl class = "cl mt6"><dd>' +
                    '<span class = "status f13 ff9"></span>' +
                    '</dd></dl></a></li>');
            }
        }

        function append_for(items, count) {
            $('#page-ul').html('');
            try {
                for (var i = 0; i < count; i++) {
                    var info = items[i];
                    $('#page-ul').append('<li class="bga bh_e f14"><a><div class="cl"><span class="status" style="float: left; color: #373cff;">' + info.top_name +
                    '</span><strong class="status"><em class="succ">每天登录</em></strong></div><dl class="cl"><dt style="word-break: break-word; width: 70%;">' +
                    '<span style="margin-right: 10px; color: #999;">总次数：'+ info.total + '</span> <span style="margin-right: 10px; color: #999;">周期次数：'+ info.z_num + '</span>'+
                    '<span style="margin-right: 10px; color: #e9d679;">威望：' + info.w_num + '</span> <span style="margin-right: 10px; color: #995621;">' +
                    '财富：'+ info.m_num + '</span></dt> <dd><cite><i class="duceapp_font f15"></i> 甬钻 <span class="ff9"> × '+ info.y_num + '</span></cite></dd>' +
                    '</dl><dl class="cl mt6"><dt class="f13 ff9" style="line-height:26px; float: right;">' +info.time + '</dt></dl></a></li>');
                }
                if (items.length <= count) {
                    $('#page-ul').append('<li class = "bga bh_e f14"><a href = "">' +
                        '<div class = "cl"> <strong class = "status ffr" style = "float: left;"></strong>' +
                        ' <span class = "status"><em style = "color: #8b8b8b;" > </em></span></div><dl class = "cl"><p>' +
                        '已经没有更多数据</p><dt></dt></dl><dl class = "cl mt6"><dd>' +
                        '<span class = "status f13 ff9"></span>' +
                        '</dd></dl></a></li>');
                    // alert('到底啦!!!!');
                }
            } catch (e) {
                e.message;
                console.log(e.message);
            }
        }


        function getItems() {
            var items = [];
            for (let i = 1; i <= 20; i++) {
                var param = {
                    top_name: '测试-' + i,
                    total: i*101,
                    z_num: i*10,
                    w_num: i*21,
                    m_num: i*21,
                    y_num: i*1,
                    time: new Date().getFullYear() + '-' + new Date().getMonth() + '-' + new Date().getDay(),
                }
                items.push(param);
            }

            return items;
            // return [
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-29 09:12:53",
            //         "number": 1
            //     },
            //     {
            //         "top_name": "积分充值",
            //         "remark": "充值获得的积分",
            //         "time": "2019-08-30 09:12:53",
            //         "number": 2
            //     },
            //     {
            //         "top_name": "积分充值",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-31 09:12:53",
            //         "number": 3
            //     },
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买 刷新卡 道具",
            //         "time": "2019-08-32 09:12:53",
            //         "number": 4
            //     },
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-29 09:12:53",
            //         "number": 5
            //     },
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-29 09:12:53",
            //         "number": 6
            //     },
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-29 09:12:53",
            //         "number": 7
            //     },
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-29 09:12:53",
            //         "number": 8
            //     },
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-29 09:12:53",
            //         "number": 9
            //     },
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-29 09:12:53",
            //         "number": 10
            //     },
            //     {
            //         "top_name": "购买道具",
            //         "remark": "购买了涂鸦板道具",
            //         "time": "2019-08-29 09:12:53",
            //         "number": 11
            //     }
            // ];
        }
    });
</script>
</body>
</html>
